<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>강좌 상세</title>
</head>
<body>
<h1>강좌 상세</h1>
<ul>
    <li>강좌 이름 : [[${course.title}]]</li>
    <li>작성자 : [[${course.id}]]</li>
    <li>현재수강인원 : [[${course.peo}]]</li>
    <li>최대수강인원 : [[${course.peo_max}]]</li>
</ul>
<hr>
<h3>강의 목록</h3>
<ol>
    <th:block th:each="lecture, status : ${lectureList}">
    <li>
        <span class="title" th:text="${lecture.title}"></span>
        <a href="javascript:void(0);"
           th:onclick="'openLecture(' + ${lecture.course.no} + ', ' + ${lecture.no} + ')'">강의보기</a>
        <span class="state" th:text="${stateList.get(status.index)}"></span>
        
        <th:block th:if="${stateList.get(status.index) eq '수강완료'}">
            <a href="#">시험보기</a>
        </th:block>
    </li>
    </th:block>
</ol>
<div>
    <th:block sec:authorize="hasAuthority('ADMIN')">
            <a th:href="@{/lecture/insert(cno=${course.no})}">강의등록</a>
    </th:block>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    function openLecture(cno, lno) {
        let screenSizeWidth, screenSizeHeight;
        if (self.screen) {
            /*screenSizeWidth = screen.width;
            screenSizeHeight = screen.height;*/
            screenSizeWidth = 1080;
            screenSizeHeight = 720;
        }
        let documentURL = "/video/player?cno="+cno+ "&lno=" + lno + "&page=" + 0;    //팝업창에 출력될 페이지 URL
        let windowname = "강의 플레이어";
        let intWidth = screenSizeWidth;
        let intHeight = screenSizeHeight;
        let intXOffset = 0;
        let intYOffset = 0;

        let obwindow = window.open(documentURL, windowname, " toolbar=no, location=no, directories=no, status=no, menubar=no, resizable=no");
        obwindow.resizeTo(intWidth, intHeight);
        obwindow.moveTo(intXOffset, intYOffset);
    }
    /*]]>*/
</script>
</body>
</html>