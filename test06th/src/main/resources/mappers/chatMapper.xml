<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chunjae.test06th.per.ChatMapper">
    <!-- 채팅방 목록 출력 -->
    <select id="findAllRoom">
        select * from chatroom
    </select>
    <!-- 해당 채팅방 채팅내역 갖고오기 -->
    <select id="findChatById">
        select * from chatmsg where room_id=#{roomId}
    </select>
    <!-- 해당 채팅방 채팅내역 갖고오기 -->
    <select id="findChatLatest">
        select * from chatmsg where room_id=#{roomId} limit 1
    </select>
    <!-- 채팅방 생성 -->
    <insert id="createRoom">
        insert into chatroom values(#{roomId}, #{name}, #{buyer}, #{seller})
    </insert>
    <!-- 채팅 내역 db 저장 -->
    <insert id="insertChat">
        insert into chatmsg values(default, #{roomId}, #{type}, #{sender}, #{message}, default)
    </insert>
</mapper>